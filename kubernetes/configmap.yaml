apiVersion: v1
kind: Namespace
metadata:
  name: desarrollo-tt

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
  namespace: desarrollo-tt
data:
  # RDS Configuration
  DB_HOST: "terraform-20251213230555521900000001.c4to686sohft.us-east-1.rds.amazonaws.com"
  DB_PORT: "3306"
  
  # API Configuration
  API_PORT: "8000"
  API_WORKERS: "4"
  
  # Frontend Configuration
  # NOTA: Usar el hostname automático de AWS ALB
  # NEXT_PUBLIC_API_URL será obtenido del ALB hostname
  # Ej: http://<alb-hostname>/back
  # NEXT_PUBLIC_API_URL: "https://api.tudominio.com"
  NEXT_PUBLIC_APP_NAME: "Desarrollo TT"
  
  # Logging
  LOG_LEVEL: "info"
  
  # Environment
  ENVIRONMENT: "production"
  
  # Backend API Configuration (Kubernetes Mode)
  K8S_MODE: "true"
  DOCKER_MODE: "false"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: api-config
  namespace: desarrollo-tt
data:
  # Database names for each API
  # Each API will receive DB_NAME pointing to its corresponding database
  DB_NAME_AACH: "aach_db"
  DB_NAME_CARABINEROS: "carabineros_db"
  DB_NAME_MTT: "mtt_db"
  DB_NAME_PRT: "prt_db"
  DB_NAME_SGD: "sgd_db"
  DB_NAME_SII: "sii_db"
  DB_NAME_SRCEI: "srcei_db"
  DB_NAME_TGR: "tgr_db"
  DB_NAME_BACK: "back_db"
  
  # APIs Endpoints (for service discovery in Kubernetes)
  # Las URLs apuntan al ALB para pasar por el Ingress con rutas correctas
  API_AACH: "http://k8s-desarrol-mainingr-3397476e21-1489990332.us-east-1.elb.amazonaws.com/aach"
  API_CARABINEROS: "http://k8s-desarrol-mainingr-3397476e21-1489990332.us-east-1.elb.amazonaws.com/carabineros"
  API_MTT: "http://k8s-desarrol-mainingr-3397476e21-1489990332.us-east-1.elb.amazonaws.com/mtt"
  API_PRT: "http://k8s-desarrol-mainingr-3397476e21-1489990332.us-east-1.elb.amazonaws.com/prt"
  API_SII: "http://k8s-desarrol-mainingr-3397476e21-1489990332.us-east-1.elb.amazonaws.com/sii"
  API_SGD: "http://k8s-desarrol-mainingr-3397476e21-1489990332.us-east-1.elb.amazonaws.com/sgd"
  API_TGR: "http://k8s-desarrol-mainingr-3397476e21-1489990332.us-east-1.elb.amazonaws.com/tgr"
  API_SRCEI: "http://k8s-desarrol-mainingr-3397476e21-1489990332.us-east-1.elb.amazonaws.com/srcei"
